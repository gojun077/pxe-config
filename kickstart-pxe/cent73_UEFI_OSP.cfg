#version=RHEL7
# 2017.02.16
# Kickstart for installing CentOS 7.3 on a UEFI firmware machine
# that will be used as a node in an Openstack multi-node install
# An X11 environment will also be installed

# System authorization information
auth --enableshadow --passalgo=sha512

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'
# System language
lang en_US.UTF-8

# Use graphical install
graphical
# Firewall configuration
firewall --enabled
# reboot when install is complete
reboot

network  --hostname=ospctrl1
# Root Password Hash (can be generated by the following python3 snippet:)
# python3 -c 'import crypt; print(crypt.crypt("yourpw", crypt.mksalt(crypt.METHOD_SHA512)))'
rootpw --iscrypted $6$Fofz1QoF7/VeP0xJ$YLr0vE7jn2Y3urkf6Sv9cLlNVaUCcC1IO9WqYDq4UBAAebitJSQJOxlxLkK3baMeaG0.IDEc2athuDv8Zyxcg1
# Add regular user
user --name suser --groups=wheel --iscrypted --password=$6$pJ7ZVp9j3Fjctn.B$NX3sT2xClZGMhEiNQWTIFATDTkoY9.k9utwnAJveF2HEdGexe5/te4ahhvtOK5tkijFMmkQXXCTQpx5vLlpWg0
# System services
services --enabled="chronyd"
services --disabled="NetworkManager"
# System timezone
timezone Asia/Seoul --isUtc

# Delete all partitions
clearpart --all --initlabel
# Delete MBR / GPT
zerombr

# System bootloader configuration
bootloader --driveorder=sda --location=mbr --boot-drive=sda

part /boot     --fstype=ext4     --ondisk=sda  --size=512
part /boot/efi --fstype=vfat
part pv.001    --fstype="lvmpv"  --ondisk=sda  --size=1 --grow
volgroup rhel  --pesize=4096 pv.001
logvol swap    --fstype="swap"   --size=8192 --name=swap --vgname=rhel
logvol /       --fstype="xfs"    --size=1    --name=root --vgname=rhel --grow


%packages
@base
@core
@network-tools
@file-server
@X Window System
@XFCE
@Desktop
chrony
epel-release
gcc
git
libffi-devel
libyaml
libselinux-python
openssl-devel
parted
python-ipython
python-ipython-doc
python34
redhat-rpm-config
sed
virtualenv
vsftpd
xinetd
%end
